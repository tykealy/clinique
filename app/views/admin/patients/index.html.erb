<%= render partial: "admin/shared/sidebar", locals: {tab: 'patients'} %>
<div class="mt-20 md:ml-64">
  <div class="px-6 py-1 mb-10">
    <ul class="flex items-center">
      <li class="flex-1 ">
        <h6 class="text-3xl font-semibold leading-8 text-gray-900">Patients</h6>
      </li>
      <li>
        <a href="/admin/patients/new">
          <button class="hover:bg-secondary py-2.5 pr-7 pl-5 rounded-xl flex items-center gap-2 text-base font-semibold text-white transition-all duration-300 bg-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 5V15M15 10H5" stroke="white" stroke-width="1.6" stroke-linecap="round"></path>
            </svg>
            New Patients
          </button>
        </a>
      </li>
    </ul>
  </div>
  <div class="mx-4">
    <div class="w-full overflow-auto bg-white rounded-lg shadow-md">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Name</th>
            <th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Phone Number</th>
            <th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Email</th>
            <th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Address</th>
            <th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Age</th>
            <th class="px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase">Actions</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @patients.each do |patient| %>
            <tr>
              <td class="px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap">
                <a href=<%= "/admin/patients/#{patient.id}/edit" %> >
                  <%= patient.full_name %>
                </a>
              </td>
              <td class="px-6 py-4 text-sm text-gray-500 whitespace-nowrap"><%= patient.phone_number %></td>
              <td class="px-6 py-4 text-sm text-gray-500 whitespace-nowrap"><%= patient.email %></td>
              <td class="px-6 py-4 text-sm text-gray-500 whitespace-nowrap"><%= patient.address %></td>
              <td class="px-6 py-4 text-sm text-gray-500 whitespace-nowrap"><%= patient.age %></td>
              <td class="px-6 py-4 text-sm font-medium text-right whitespace-nowrap">
                <a href="/admin/patients/<%= patient.id %>/edit" class="text-primary hover:text-secondary">Edit</a>
                <%= link_to admin_patient_path(id: patient.id),
                    data: {
                      turbo_method: :delete,
                      turbo_confirm: "Are you sure?"
                    },
                    class: "text-red-600 hover:text-red-900 ml-4" do %>
                  Delete
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6">
    <div class="flex justify-between flex-1 sm:hidden">
      <a href="#" class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">Previous</a>
      <a href="#" class="relative inline-flex items-center px-4 py-2 ml-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">Next</a>
    </div>
    <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
      <div>
        <p class="text-sm text-gray-700">
          Showing
          <span class="font-medium"><%= [@patients.size, @patients.total_count].min %></span>
          of
          <span class="font-medium"><%= @patients.total_count %></span>
          results
        </p>
      </div>
      <div>
        <nav class="inline-flex -space-x-px rounded-md shadow-sm isolate" aria-label="Pagination">
          <% if @patients.prev_page %>
            <%= link_to admin_patients_path(page: @patients.prev_page), class: 'relative inline-flex items-center px-2 py-2 text-gray-400 rounded-l-md ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0' do %>
              <span class="sr-only">Previous</span>
              <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
              </svg>
            <% end %>
          <% else %>
            <span class="relative inline-flex items-center px-2 py-2 text-gray-300 rounded-l-md ring-1 ring-inset ring-gray-300">
              <span class="sr-only">Previous</span>
              <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
              </svg>
            </span>
          <% end %>
          <!-- Page Numbers -->
          <% @patients.total_pages.times do |page_number| %>
            <% if page_number + 1 == @patients.current_page %>
              <!-- Current Page Link -->
              <span class="relative z-10 inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-primary focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary">
                <%= page_number + 1 %>
              </span>
            <% else %>
              <%= link_to page_number + 1, admin_patients_path(page: page_number + 1), class: 'relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0' %>
            <% end %>
          <% end %>
          <% if @patients.next_page %>
            <%= link_to admin_patients_path(page: @patients.next_page), class: 'relative inline-flex items-center px-2 py-2 text-gray-400 rounded-r-md ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0' do %>
              <span class="sr-only">Next</span>
              <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
              </svg>
            <% end %>
          <% else %>
            <span class="relative inline-flex items-center px-2 py-2 text-gray-300 rounded-r-md ring-1 ring-inset ring-gray-300">
              <span class="sr-only">Next</span>
              <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
              </svg>
            </span>
          <% end %>
        </nav>
      </div>
    </div>
  </div>
</div>